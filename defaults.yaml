# forge-reflect default configuration.
#
# Override: create config.yaml (gitignored) with only the fields you want to change.

# User content root (absolute path to vault). Empty = use cwd.
user:
  root: ""

# Transcript analysis
insight_marker: "★ Insight"
memory_paths:
  - "Memory/Insights/"
  - "Memory/Imperatives/"
write_tool_names:
  - "Edit"
  - "Write"
  - "edit"
  - "write"
  - "safe-write"

# Substantiality thresholds
tool_turn_threshold: 10
user_msg_threshold: 4
duration_threshold_minutes: 15
user_msg_floor: 2

# Skill file paths (user-root-relative)
reflection: Orchestration/Skills/SessionReflect/SKILL.md
insight_check: Orchestration/Skills/InsightCheck/SKILL.md

# Data directory suffix for scope check
data_dir_suffix: Data

# Hook message strings
fallback_reason: >-
  Substantial session with no insights captured.
  Create a file in Memory/Insights/ or Memory/Imperatives/ before ending.
precompact_prefix: >-
  STOP — BEFORE COMPACTING, check for uncaptured insights.
  Any ★ Insight block in this session that does NOT have a corresponding Memory/Insights/ file
  MUST be persisted NOW using the Write tool. Do not compact until all insights are captured.
  Apply the reusability filter below: capture reusable patterns, let one-off traces compact away.
uncaptured_insight_reason: >-
  Uncaptured insights detected. Rule 12: every ★ Insight block
  MUST be persisted as a Memory/Insights/ file before ending.

# Vault topology paths
memory:
  imperatives: Orchestration/Memory/Imperatives
  insights: Orchestration/Memory/Insights
  ideas: Orchestration/Memory/Ideas
journal:
  daily: Resources/Journals/Daily/YYYY/MM/YYYY-MM-DD.md
commands:
  safe_read: Modules/forge-tlp/bin/safe-read
  safe_write: Modules/forge-tlp/bin/safe-write
backlog: Orchestration/Backlog.md

# Memory promotion settings (user-root-relative paths)
promote:
  steering: Orchestration/Steering
  skills: Orchestration/Skills
  agents: Orchestration/Agents
  invariants: Orchestration/Invariants
  scripts: Scratch
  archive: Archives/Memory

# Skill allowlists (provider-keyed, used by install-skills)
skills:
    claude:
        ContextKeeper:
        InsightCheck:
        MemoryHarvest:
        MemoryInsights:
        MemoryPromote:
        MemoryReview:
        SessionReflect:
        Surface:

    gemini:
        ContextKeeper:
        InsightCheck:
        MemoryHarvest:
        MemoryInsights:
        MemoryPromote:
        MemoryReview:
        SessionReflect:
        Surface:

    codex:
        ContextKeeper:
        InsightCheck:
        MemoryHarvest:
        MemoryInsights:
        MemoryPromote:
        MemoryReview:
        SessionReflect:
        Surface:

# Surfacing (PostToolUse digest — injected via additionalContext)
surface:
  archive_dir: Resources/Archives
  archive_prefix: "Safari Tab Snapshot"
  reminders_list: work
  ideas_cutoff_days: 14
  due_soon_days: 3
  max_items: 5
  post_tool_use_prompt: >-
    Display this surface digest VERBATIM to the user.
    Do not summarize, reframe, or skip any items.
